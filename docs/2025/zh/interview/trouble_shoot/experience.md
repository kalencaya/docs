# 经验案例

## 1.cpu 利用率高如何排查

解决思路：

* 定位到占用 CPU 高的进程 pid。如果 CPU 达到 100%，top 等命令无法查找





## linux 命令

### top

top 命令是 Linux 系统中常用的性能分析工具，可以实时显示系统中各进程的资源占用情况。

```shell
top [-n] [-d] 
```

> [!NOTE]
>
> - [-n]：只在开始时显示一次各字段名称。
> - [delay]：刷新时间间隔。如果不指定，只显示一条结果。
> - [count]：刷新次数。如果不指定刷新次数，但指定了刷新时间间隔，这时刷新次数为无穷。

如每 5 秒统计一次各进程相关信息：

```shell
top -d 5
```

在 top 命令执行过程中，可以使用一些交互命令：

* `shift + p`。对 CPU 使用率进行倒序排列，方便定位系统中占用 CPU 较高的进程
* `shift + m`。对系统内存使用情况进行排序
* `1`。如果有多核 CPU，数字键 1 可以显示每核 CPU 的负载状况
* `k`。输入 `k` 后，输入想要终止的进程 pid，按 Enter 键可杀死进程

根据 pid 查看进程对应的程序文件：

```shell
ll /proc/{PID}/exe

# 比如 pid 对应为 10086
ll /proc/10086/exe
```

### htop

待定

### vmstat

```shell
vmstat [-n] [delay [count]] 
```

> [!NOTE]
>
> - [-n]：只在开始时显示一次各字段名称。
> - [delay]：刷新时间间隔。如果不指定，只显示一条结果。
> - [count]：刷新次数。如果不指定刷新次数，但指定了刷新时间间隔，这时刷新次数为无穷。

